# **家計簿アプリ 要件定義書**

## **1\. 概要**

本ドキュメントは、自作の家計簿アプリケーション（以下、本アプリ）を開発するにあたり、その仕様と要件を定義するものである。  
本アプリは、クレジットカードや銀行口座の利用明細CSVファイルを取り込み、家計の収支や資産推移を可視化することを目的とする。

## **2\. 開発目的**

* 複数の金融機関（クレジットカード、銀行口座）の利用明細を一元管理する。  
* 手動での入力の手間を省き、CSVファイルのインポートによって効率的に家計管理を行う。
* 月々の収支状況、資産の推移を直感的に把握できるようにする。  
* 家族との共同支出における割り勘計算を簡素化する。

## **3\. 機能要件**

本アプリに実装する機能を以下に定義する。

### **3.1. 明細情報のインポート機能**

クレジットカード会社や銀行からダウンロードした利用明細のCSVファイルをGoogleDriveからインポートし、データベース（Googleスプレッドシート）に登録する。

| 項目 ID | 機能名 | 機能概要 |
| :---- | :---- | :---- |
| F-01 | CSVインポート機能 | Google Drive内の指定フォルダにCSVファイルが追加されたことをトリガーに、自動でファイルを読み込み、明細データをデータベース（Googleスプレッドシート）に保存する。手動での実行も可能とする。クレジットカード会社、銀行口座ごとにデータを識別して管理できること。 |

### **3.2. 明細情報の整理機能**

インポートした各金融機関のデータを、アプリ内で統一的に扱うための共通フォーマットに変換し、費目を自動で分類する。

| 項目 ID | 機能名 | 機能概要 |
| :---- | :---- | :---- |
| F-02 | データ整形・変換機能 | 各金融機関のCSVフォーマットの差異を吸収し、後述の**共通フォーマット**にデータを変換する。どの列が「日付」「内容」「金額」にあたるかの対応付けは、金融機関ごとに設定ファイルで定義できるようにする。 |
| F-03 | 自動カテゴリ分類機能 | 明細の「内容」欄の文字列を基に、「分類大項目」「分類中項目」を自動で割り当てる。分類のルール（キーワードとカテゴリの紐付け）は、設定ファイルで定義できるようにする。 |

#### **共通フォーマット**

アプリ内で使用するデータの統一形式は以下の通りとする。

| フィールド名 | データ型 | 説明 | 例 |
| :---- | :---- | :---- | :---- |
| 日付 | Date | 取引が行われた年月日 | 2025-09-04 |
| 内容 | String | 利用内容、摘要 | スーパー〇〇 |
| 金額 | Integer | 支出（負の値）、収入（正の値） | \-3500 |
| 保有金融機関 | String | クレジットカード会社名、銀行名など | 〇〇カード |
| 分類大項目 | String | 支出・収入の大分類 | 食費 |
| 分類中項目 | String | 支出・収入の中分類 | 食料品 |

### **3.3. 収支の可視化機能**

月ごとの収入と支出を集計し、家計の状況を分かりやすく表示する。

| 項目 ID | 機能名 | 機能概要 |
| :---- | :---- | :---- |
| F-04 | 月次収支レポート機能 | 月を指定すると、その月の収入合計、支出合計、および差額（黒字・赤字）を算出し、「月次レポート」シートに結果を出力する。 |
| F-05 | 月次明細一覧機能 | 月を指定すると、その月の全明細を「明細一覧」シートに表形式で出力する。これにより、「いつ、どこで、いくら使ったか」を詳細に確認できる。スプレッドシートのフィルタ・ソート機能を利用して、利用者が自由にデータを並べ替えられるようにする。 |

### **3.4. 割り勘計算機能**

家族など、複数人で支払いを分担する支出を抽出し、割り勘金額を計算する。

| 項目 ID | 機能名 | 機能概要 |
| :---- | :---- | :---- |
| F-06 | 割り勘金額算出機能 | 月ごとに、割り勘対象となる支出の合計額と、一人あたりの負担額を算出して表示する。どの明細を割り勘対象とするかは、設定ファイルで内容のキーワードを指定できるようにする。（例：「共通」「家賃」など） |

### **3.5. 資産推移の可視化機能**

月ごとの総資産額の推移をグラフで表示する。

| 項目 ID | 機能名 | 機能概要 |
| :---- | :---- | :---- |
| F-07 | 資産推移グラフ機能 | 各月末時点の総資産額を算出し、「資産推移」シートに推移が視覚的にわかるグラフ（折れ線グラフなど）を生成・更新する。 |

## **4\. 非機能要件（想定）**

機能要件以外で、本アプリが満たすべき要件を以下に定義する。

### **4.1. 動作環境**

本アプリはGoogle Apps Script (GAS) を用いて開発・実行されることを前提とする。

*   **実行環境**: Googleアカウントおよび標準的なウェブブラウザ（Google Chrome, Firefox, Microsoft Edgeなど）。特別なアプリケーションのインストールは不要。
*   **対応OS**: OSに依存しない。Windows, macOS, Linux, ChromeOSなど、ウェブブラウザが動作する環境であれば利用可能。
*   **UI（ユーザーインターフェース）**: Googleスプレッドシートを主たるUIとして利用する。シート上にカスタムメニューを追加し、そこから各機能（CSVインポート、レポート表示など）を呼び出す形式とする。
*   **データストレージ**:
    *   **明細データ**: Googleスプレッドシート内の特定のシートに保存する。
    *   **設定ファイル**: Google Drive上にJSONまたはYAML形式のファイルとして保存する。

### **4.2. データ管理**

* **データ永続化**: アプリケーションのデータ（明細、設定など）は、GoogleDrive内に保存し、アプリを終了してもデータが消えないようにする。  
* **バックアップ**: データのバックアップ・リストア機能については、初期開発の範囲外とするが、将来的な拡張を考慮する。

### **4.3. 設定ファイル**

* CSVのフォーマット定義、カテゴリ分類ルール、割り勘対象の定義などは、利用者が編集可能な外部ファイル（例: YAML, JSON形式）で管理する。これにより、アプリの再ビルドなしで設定変更が可能となる。